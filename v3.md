# User Management API Documentation

## Overview
This API provides functionalities for user management, including authentication, profile management, and account deletion. It follows RESTful principles and uses JWT-based authentication.

For more information on RESTful API principles, refer to [RESTful API Design](https://restfulapi.net/).

---

## Summary of Response Codes
| Status Code | Meaning |
|------------|---------|
| 200 OK | Request was successful |
| 201 Created | Resource successfully created |
| 400 Bad Request | Missing or invalid input |
| 401 Unauthorized | Invalid or missing authentication token |
| 403 Forbidden | User does not have permission |
| 404 Not Found | Requested resource does not exist |
| 409 Conflict | Resource already exists |

---

## Authentication
### Login
**Endpoint:** `POST /api/auth/login`

#### Request
**Headers:**
```json
{
  "Content-Type": "application/json"
}
```

**Body:**
```json
{
  "email": "user@example.com",
  "password": "securePassword123"
}
```

#### Response
**Success (200 OK):**
```json
{
  "token": "jwt-token-string",
  "user": {
    "id": 1,
    "name": "John Doe",
    "email": "user@example.com"
  }
}
```

**Error Cases:**
- `400 Bad Request`: Missing email or password.
- `401 Unauthorized`: Invalid credentials.

### Logout (Not Provided in Prompt, Handling Assumption)
Since no logout endpoint was given, we assume that token invalidation happens client-side or via a blacklist.
- Suggestion: Implement `POST /api/auth/logout` to invalidate the JWT server-side. 
- Alternative: Implement token expiration policies for automatic session invalidation.

For JWT authentication and best practices, refer to [JWT.io](https://jwt.io/).

---

## User Management
### Register User
**Endpoint:** `POST /api/auth/register`

#### Request
**Body:**
```json
{
  "name": "John Doe",
  "email": "user@example.com",
  "password": "securePassword123"
}
```

#### Response
**Success (201 Created):**
```json
{
  "message": "User registered successfully",
  "userId": 1
}
```

**Error Cases:**
- `400 Bad Request`: Missing fields or invalid email.
- `409 Conflict`: Email already exists.

### Fetch User Profile
**Endpoint:** `GET /api/users/{id}`

#### Request
**Headers:**
```json
{
  "Authorization": "Bearer jwt-token-string"
}
```

#### Response
**Success (200 OK):**
```json
{
  "id": 1,
  "name": "John Doe",
  "email": "user@example.com",
  "createdAt": "2023-05-01T10:00:00Z"
}
```

**Error Cases:**
- `401 Unauthorized`: Missing or invalid token.
- `403 Forbidden`: Trying to access another user’s profile.
- `404 Not Found`: User does not exist.

### Update User Details
**Endpoint:** `PUT /api/users/{id}`

#### Request
**Headers:**
```json
{
  "Authorization": "Bearer jwt-token-string",
  "Content-Type": "application/json"
}
```

**Body:**
```json
{
  "name": "John Updated",
  "email": "newemail@example.com"
}
```

#### Response
**Success (200 OK):**
```json
{
  "message": "User details updated successfully"
}
```

**Error Cases:**
- `400 Bad Request`: Invalid input.
- `403 Forbidden`: Unauthorized access.
- `409 Conflict`: Email already exists.

### Delete User Account
**Endpoint:** `DELETE /api/users/{id}`

#### Request
**Headers:**
```json
{
  "Authorization": "Bearer jwt-token-string"
}
```

#### Response
**Success (200 OK):**
```json
{
  "message": "User deleted successfully"
}
```

**Error Cases:**
- `403 Forbidden`: Unauthorized access.
- `404 Not Found`: User does not exist.

---

## Edge Cases Considered
1. **Logout Not Defined:**
   - Suggested a logout endpoint for token invalidation.
   - Assumed client-side token deletion as an alternative.
2. **Email Conflict on Registration & Update:**
   - Returning `409 Conflict` when email already exists.
3. **Access Control for User Profile & Update:**
   - Added `403 Forbidden` when accessing another user’s data.
4. **Token Expiry Handling:**
   - API should return `401 Unauthorized` for expired tokens.
5. **Rate Limiting (Not Mentioned in Prompt):**
   - Suggested implementing rate limits for login to prevent brute force.

For API security best practices, refer to [OWASP API Security](https://owasp.org/www-project-api-security/).

---

## Assumptions
- **JWT-based authentication** is used.
- **Logout requires token invalidation**, either client-side or via server blacklisting.
- **Users can only update or delete their own account** (admin access not defined).
- **Pagination not required** for fetching users (not mentioned in prompt).

---
